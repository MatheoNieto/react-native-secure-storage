var p=class{constructor(e){this.repo=e}execute(e,r){return this.repo.setItem(e,r)}};var S=class{constructor(e){this.repo=e}async execute(e){return await this.repo.getItem(e)}};var f=class{constructor(e){this.repo=e}execute(e){return console.log("removing item from secure storage"),this.repo.removeItem(e)}};var w=class{constructor(e){this.repo=e}execute(){this.repo.removeAll(),console.log("removing all items from secure storage")}};var I=class{constructor(e){this.repo=e}execute(e,r){return this.repo.setItem(e,r)}};var v=class{constructor(e){this.repo=e}async execute(e){return await this.repo.getItem(e)}};var x=t=>({setItem:(e,r)=>new p(t).execute(e,r),getItem:e=>new S(t).execute(e),removeItem:e=>new f(t).execute(e),removeAll:()=>new w(t).execute()}),y=t=>({setItem:(e,r)=>new I(t).execute(e,r),getItem:e=>new v(t).execute(e)});import{NativeModules as V}from"react-native";var{StorageModule:R}=V,A={getItem:async t=>{if(!R)throw new Error("StorageModule not available");return await R.getItem(t)},setItem:async(t,e)=>{if(!R)throw new Error("StorageModule not available");return await R.setItem(t,e)}};var n=class{async setItem(e,r){return await A.setItem(e,r)}async getItem(e){return await A.getItem(e)??null}};import{NativeModules as b}from"react-native";var{SecureStorageModule:s}=b,m={setItem:async(t,e)=>{if(!s)throw new Error("SecureStorageModule not available");return await s.saveString(t,e)},getItem:async t=>{if(!s)throw new Error("SecureStorageModule not available");return await s.loadString(t)},removeItem:async t=>{if(!s)throw new Error("SecureStorageModule not available");return await s.removeItem(t)},removeAll:async()=>{if(!s)throw new Error("SecureStorageModule not available");return await s.removeAll()}};var i=class{async removeItem(e){return await m.removeItem(e)}async removeAll(){return await m.removeAll()}async setItem(e,r){return await m.setItem(e,r)}async getItem(e){return await m.getItem(e)??null}};import u from"react";var ee=t=>{let e=new n,r=y(e),[c,a]=u.useState(null),[d,g]=u.useState(!1);u.useEffect(()=>{(async()=>{g(!0);let o=await r.getItem(t);console.log("===>LOADING DATA MOUNTED===>",o),a(o),g(!1)})()},[t]);let E=u.useCallback(o=>{r.setItem(t,o),a(o)},[c,t]),h=u.useCallback(async()=>{let o=await r.getItem(t);console.log("REFRESH VALUE",o),a(o)},[t]);return{value:c,updateValue:E,refreshValue:h,loading:d}};import l from"react";var ae=t=>{let e=new i,r=x(e),[c,a]=l.useState(null),[d,g]=l.useState(!1);l.useEffect(()=>{(async()=>{g(!0);let o=await r.getItem(t);console.log("===>LOADING DATA MOUNTED===>",o),a(o),g(!1)})()},[t]);let E=l.useCallback(o=>{r.setItem(t,o),a(o)},[c,t]),h=l.useCallback(async()=>{let o=await r.getItem(t);console.log("REFRESH VALUE",o),a(o)},[t]);return{value:c,updateValue:E,refreshValue:h,loading:d}};var C=new n,M=new i,me=y(C),ue=x(M);export{ue as SecureStorage,me as Storage,ae as useSecureStorage,ee as useStorage};
//# sourceMappingURL=index.mjs.map