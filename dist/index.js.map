{"version":3,"sources":["../src/index.ts","../src/application/useCases/setItem.ts","../src/application/useCases/removeItem.ts","../src/application/useCases/getItem.ts","../src/application/useCases/removeAll.ts","../src/application/useCases/index.ts","../src/infrastructure/nativeStorageBridge.ts","../src/infrastructure/storageRepository.ts","../src/presentation/hooks/useStorage.ts"],"sourcesContent":["import {createStorageUC} from '@application/useCases';\nimport {SecureStorageRepositoryImpl} from '@infrastructure/storageRepository';\n\nexport * from '@presentation/hooks/useStorage';\n\nconst repo = SecureStorageRepositoryImpl.getInstance();\nconst createUC = createStorageUC(repo);\n\nexport default createUC;\n","import { SecureStorageRepository } from \"@domain/repositories/secureStorageRepository\";\n\nexport class SetItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute(key: string, value: string) {\n    return this.repo.setItem(key, value);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class RemoveItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute(key: string) {\n    return this.repo.removeItem(key);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class GetItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  async execute(key: string) {\n    return await this.repo.getItem(key);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class RemoveAllStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute() {\n    console.log('removing all items from storage');\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\nimport {SetItemStorage} from './setItem';\nimport {RemoveItemStorage} from './removeItem';\nimport {GetItemStorage} from './getItem';\nimport {RemoveAllStorage} from './removeAll';\n\nexport const createStorageUC = (repo: SecureStorageRepository) => ({\n  setItem: new SetItemStorage(repo),\n  removeItem: new RemoveItemStorage(repo),\n  getItem: new GetItemStorage(repo),\n  removeAll: new RemoveAllStorage(repo),\n});\n","import {NativeModules} from 'react-native';\nconst {StorageModule} = NativeModules;\n\nexport const NativeStorage = {\n  getItem: (key: string) => StorageModule.getItem(key),\n  setItem: (key: string, value: string) => StorageModule.setItem(key, value),\n  removeItem: (key: string) => StorageModule.removeItem(key),\n};\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\nimport {NativeStorage} from './nativeStorageBridge';\n\nexport class SecureStorageRepositoryImpl implements SecureStorageRepository {\n  private static _instance: SecureStorageRepositoryImpl;\n\n  static getInstance() {\n    if (!SecureStorageRepositoryImpl._instance) {\n      SecureStorageRepositoryImpl._instance = new SecureStorageRepositoryImpl();\n    }\n    return SecureStorageRepositoryImpl._instance;\n  }\n\n  async setItem(key: string, value: string): Promise<void> {\n    return await NativeStorage.setItem(key, value);\n  }\n  async getItem(key: string): Promise<string | null> {\n    return await NativeStorage.getItem(key);\n  }\n  async removeItem(key: string): Promise<void> {\n    return await NativeStorage.removeItem(key);\n  }\n}\n","import {createStorageUC} from '@application/useCases';\nimport React from 'react';\nimport {SecureStorageRepositoryImpl} from '@infrastructure/storageRepository';\n\nexport const useStorage = (keyName: string) => {\n  const repo = SecureStorageRepositoryImpl.getInstance();\n  const createUC = createStorageUC(repo);\n\n  const [value, setValue] = React.useState<string | null>(null);\n  const [loading, setLoading] = React.useState<boolean>(false);\n\n  React.useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const storedValue = await createUC.getItem.execute(keyName);\n      console.log('===>LOADING DATA MOUNTED===>', storedValue);\n      setValue(storedValue);\n      setLoading(false);\n    })();\n  }, [keyName]);\n\n  const updateValue = React.useCallback(\n    (newValue: string) => {\n      createUC.setItem.execute(keyName, newValue);\n      setValue(newValue);\n    },\n    [value, keyName],\n  );\n\n  const deleteItem = React.useCallback(() => {\n    createUC.removeItem.execute(keyName);\n    setValue(null);\n  }, [keyName]);\n\n  const refreshValue = React.useCallback(async () => {\n    const newValue = await createUC.getItem.execute(keyName);\n    setValue(newValue);\n  }, [keyName]);\n\n  return {\n    value,\n    updateValue,\n    refreshValue,\n    deleteItem,\n    loading,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEO,IAAM,iBAAN,MAAqB;AAAA,EAC1B,YAAoBA,OAA+B;AAA/B,gBAAAA;AAAA,EAAgC;AAAA,EACpD,QAAQ,KAAa,OAAe;AAClC,WAAO,KAAK,KAAK,QAAQ,KAAK,KAAK;AAAA,EACrC;AACF;;;ACLO,IAAM,oBAAN,MAAwB;AAAA,EAC7B,YAAoBC,OAA+B;AAA/B,gBAAAA;AAAA,EAAgC;AAAA,EACpD,QAAQ,KAAa;AACnB,WAAO,KAAK,KAAK,WAAW,GAAG;AAAA,EACjC;AACF;;;ACLO,IAAM,iBAAN,MAAqB;AAAA,EAC1B,YAAoBC,OAA+B;AAA/B,gBAAAA;AAAA,EAAgC;AAAA,EACpD,MAAM,QAAQ,KAAa;AACzB,WAAO,MAAM,KAAK,KAAK,QAAQ,GAAG;AAAA,EACpC;AACF;;;ACLO,IAAM,mBAAN,MAAuB;AAAA,EAC5B,YAAoBC,OAA+B;AAA/B,gBAAAA;AAAA,EAAgC;AAAA,EACpD,UAAU;AACR,YAAQ,IAAI,iCAAiC;AAAA,EAC/C;AACF;;;ACDO,IAAM,kBAAkB,CAACC,WAAmC;AAAA,EACjE,SAAS,IAAI,eAAeA,KAAI;AAAA,EAChC,YAAY,IAAI,kBAAkBA,KAAI;AAAA,EACtC,SAAS,IAAI,eAAeA,KAAI;AAAA,EAChC,WAAW,IAAI,iBAAiBA,KAAI;AACtC;;;ACXA,0BAA4B;AAC5B,IAAM,EAAC,cAAa,IAAI;AAEjB,IAAM,gBAAgB;AAAA,EAC3B,SAAS,CAAC,QAAgB,cAAc,QAAQ,GAAG;AAAA,EACnD,SAAS,CAAC,KAAa,UAAkB,cAAc,QAAQ,KAAK,KAAK;AAAA,EACzE,YAAY,CAAC,QAAgB,cAAc,WAAW,GAAG;AAC3D;;;ACJO,IAAM,+BAAN,MAAM,6BAA+D;AAAA,EAG1E,OAAO,cAAc;AACnB,QAAI,CAAC,6BAA4B,WAAW;AAC1C,mCAA4B,YAAY,IAAI,6BAA4B;AAAA,IAC1E;AACA,WAAO,6BAA4B;AAAA,EACrC;AAAA,EAEA,MAAM,QAAQ,KAAa,OAA8B;AACvD,WAAO,MAAM,cAAc,QAAQ,KAAK,KAAK;AAAA,EAC/C;AAAA,EACA,MAAM,QAAQ,KAAqC;AACjD,WAAO,MAAM,cAAc,QAAQ,GAAG;AAAA,EACxC;AAAA,EACA,MAAM,WAAW,KAA4B;AAC3C,WAAO,MAAM,cAAc,WAAW,GAAG;AAAA,EAC3C;AACF;AAlBE,cADW,8BACI;AADV,IAAM,8BAAN;;;ACFP,mBAAkB;AAGX,IAAM,aAAa,CAAC,YAAoB;AAC7C,QAAMC,QAAO,4BAA4B,YAAY;AACrD,QAAMC,YAAW,gBAAgBD,KAAI;AAErC,QAAM,CAAC,OAAO,QAAQ,IAAI,aAAAE,QAAM,SAAwB,IAAI;AAC5D,QAAM,CAAC,SAAS,UAAU,IAAI,aAAAA,QAAM,SAAkB,KAAK;AAE3D,eAAAA,QAAM,UAAU,MAAM;AACpB,KAAC,YAAY;AACX,iBAAW,IAAI;AACf,YAAM,cAAc,MAAMD,UAAS,QAAQ,QAAQ,OAAO;AAC1D,cAAQ,IAAI,gCAAgC,WAAW;AACvD,eAAS,WAAW;AACpB,iBAAW,KAAK;AAAA,IAClB,GAAG;AAAA,EACL,GAAG,CAAC,OAAO,CAAC;AAEZ,QAAM,cAAc,aAAAC,QAAM;AAAA,IACxB,CAAC,aAAqB;AACpB,MAAAD,UAAS,QAAQ,QAAQ,SAAS,QAAQ;AAC1C,eAAS,QAAQ;AAAA,IACnB;AAAA,IACA,CAAC,OAAO,OAAO;AAAA,EACjB;AAEA,QAAM,aAAa,aAAAC,QAAM,YAAY,MAAM;AACzC,IAAAD,UAAS,WAAW,QAAQ,OAAO;AACnC,aAAS,IAAI;AAAA,EACf,GAAG,CAAC,OAAO,CAAC;AAEZ,QAAM,eAAe,aAAAC,QAAM,YAAY,YAAY;AACjD,UAAM,WAAW,MAAMD,UAAS,QAAQ,QAAQ,OAAO;AACvD,aAAS,QAAQ;AAAA,EACnB,GAAG,CAAC,OAAO,CAAC;AAEZ,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;ARzCA,IAAM,OAAO,4BAA4B,YAAY;AACrD,IAAM,WAAW,gBAAgB,IAAI;AAErC,IAAO,gBAAQ;","names":["repo","repo","repo","repo","repo","repo","createUC","React"]}