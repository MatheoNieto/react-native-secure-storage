{"version":3,"sources":["../src/index.ts","../src/application/useCases/setItem.ts","../src/application/useCases/removeItem.ts","../src/application/useCases/getItem.ts","../src/application/useCases/removeAll.ts","../src/application/useCases/index.ts","../src/presentation/hooks/useStorage.ts","../src/infrastructure/nativeStorageBridge.ts","../src/infrastructure/storageRepository.ts"],"sourcesContent":["export * from '@presentation/hooks/useStorage';\n","import { SecureStorageRepository } from \"@domain/repositories/secureStorageRepository\";\n\nexport class SetItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute(key: string, value: string) {\n    return this.repo.setItem(key, value);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class RemoveItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute(key: string) {\n    return this.repo.removeItem(key);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class GetItemStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  async execute(key: string) {\n    return await this.repo.getItem(key);\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\n\nexport class RemoveAllStorage {\n  constructor(private repo: SecureStorageRepository) {}\n  execute() {\n    return this.repo.removeAll();\n  }\n}\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\nimport {SetItemStorage} from './setItem';\nimport {RemoveItemStorage} from './removeItem';\nimport {GetItemStorage} from './getItem';\nimport {RemoveAllStorage} from './removeAll';\n\nexport const createStorageUC = (repo: SecureStorageRepository) => ({\n  setItem: new SetItemStorage(repo),\n  removeItem: new RemoveItemStorage(repo),\n  getItem: new GetItemStorage(repo),\n  removeAll: new RemoveAllStorage(repo),\n});\n","import {createStorageUC} from '@application/useCases';\nimport React from 'react';\nimport {SecureStorageRepositoryImpl} from '@infrastructure/storageRepository';\n\nexport const useStorage = (keyName: string) => {\n  const repo = new SecureStorageRepositoryImpl();\n  const createUC = createStorageUC(repo);\n\n  const [value, setValue] = React.useState<string | null>(null);\n  const [loading, setLoading] = React.useState<boolean>(false);\n\n  React.useEffect(() => {\n    let isMounted = true;\n\n    (async () => {\n      setLoading(true);\n      const storedValue = await createUC.getItem.execute(keyName);\n      if (isMounted) {\n        setValue(storedValue);\n        setLoading(false);\n      }\n    })();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [keyName]);\n\n  const updateValue = React.useCallback(\n    (newValue: string) => {\n      createUC.setItem.execute(keyName, newValue);\n      setValue(newValue);\n    },\n    [value, keyName],\n  );\n\n  const deleteItem = React.useCallback(() => {\n    createUC.removeItem.execute(keyName);\n    setValue(null);\n  }, [keyName]);\n\n  return {\n    value,\n    updateValue,\n    deleteItem,\n    loading,\n  };\n};\n","import {NativeModules} from 'react-native';\n\nconst {StorageModule} = NativeModules;\n\nexport const NativeStorage = {\n  saveValue: (key: string, value: string): Promise<void> =>\n    StorageModule.setItem(key, value),\n  getValue: (key: string): Promise<string | null> => StorageModule.getItem(key),\n  removeValue: (key: string): Promise<void> => StorageModule.removeItem(key),\n  removeAll: () => {},\n};\n","import {SecureStorageRepository} from '@domain/repositories/secureStorageRepository';\nimport {NativeStorage} from './nativeStorageBridge';\n\nexport class SecureStorageRepositoryImpl implements SecureStorageRepository {\n  async setItem(key: string, value: string): Promise<void> {\n    return await NativeStorage.saveValue(key, value);\n  }\n  async getItem(key: string): Promise<string | null> {\n    return await NativeStorage.getValue(key);\n  }\n  async removeItem(key: string): Promise<void> {\n    return await NativeStorage.removeValue(key);\n  }\n  async removeAll(): Promise<void> {\n    return NativeStorage.removeAll();\n  }\n}\n"],"mappings":"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","names":["React"]}